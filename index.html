<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Online Chat</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
    margin: 0;
    font-family: system-ui, Arial;
    background: #0f172a;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.chat-box {
    width: 380px;
    background: #020617;
    border-radius: 14px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 40px rgba(0,0,0,.6);
}

header {
    padding: 14px;
    font-weight: bold;
    background: #020617;
    border-bottom: 1px solid #1e293b;
}

#messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
}

.msg {
    margin-bottom: 6px;
    font-size: 14px;
}

.name {
    color: #38bdf8;
    font-weight: bold;
}

footer {
    padding: 10px;
    border-top: 1px solid #1e293b;
}

input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: none;
    background: #020617;
    color: white;
    outline: none;
}
</style>
</head>

<body>

<div class="chat-box">
    <header>ðŸ’¬ Global Chat</header>

    <div id="messages"></div>

    <footer>
        <input id="input" placeholder="Nachricht eingeben (Enter drÃ¼cken)">
    </footer>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG (HIER Ã„NDERN!) */
const firebaseConfig = {
    apiKey: "DEIN_API_KEY",
    authDomain: "DEIN_PROJEKT.firebaseapp.com",
    databaseURL: "https://DEIN_PROJEKT-default-rtdb.firebaseio.com",
    projectId: "DEIN_PROJEKT",
};

/* INIT */
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* NAME MERKEN */
let username = localStorage.getItem("username");
if (!username) {
    username = prompt("Dein Name:");
    localStorage.setItem("username", username);
}

/* ELEMENTE */
const input = document.getElementById("input");
const messages = document.getElementById("messages");

/* ENTER ZUM SENDEN */
input.addEventListener("keydown", e => {
    if (e.key === "Enter" && input.value.trim() !== "") {
        sendMessage();
    }
});

/* SENDEN */
function sendMessage() {
    db.ref("messages").push({
        name: username,
        text: input.value,
        time: Date.now()
    });
    input.value = "";
}

/* NACHRICHTEN LADEN (BLEIBEN NACH RELOAD) */
db.ref("messages").limitToLast(100).on("child_added", snapshot => {
    const data = snapshot.val();

    const div = document.createElement("div");
    div.className = "msg";
    div.innerHTML = `<span class="name">${data.name}:</span> ${data.text}`;

    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
});
</script>

</body>
</html>
